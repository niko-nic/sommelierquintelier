import{d as ft,N as mt,R as f,e as vt,r as u,f as X,j as s,P as I,h as A,i as H,O as gt,Q as ht,T as yt,U as xt,V as Et,Y as St,g as Ct,Z as z,$ as bt,a0 as jt,l as L,X as Pt,u as fe,a1 as me,a2 as Rt,p as ve}from"./index--c8LnkeS.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=ft("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var he="clover",Nt=function(e){return e===3?"v3":e},ye="https://js.stripe.com",Ot="".concat(ye,"/").concat(he,"/stripe.js"),wt=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Dt=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,se="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",kt=function(e){return wt.test(e)||Dt.test(e)},Tt=function(){for(var e=document.querySelectorAll('script[src^="'.concat(ye,'"]')),r=0;r<e.length;r++){var n=e[r];if(kt(n.src))return n}return null},ie=function(e){var r="",n=document.createElement("script");n.src="".concat(Ot).concat(r);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(n),n},_t=function(e,r){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"8.2.0",startTime:r})},T=null,U=null,$=null,At=function(e){return function(r){e(new Error("Failed to load Stripe.js",{cause:r}))}},It=function(e,r){return function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))}},Lt=function(e){return T!==null?T:(T=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe&&e&&console.warn(se),window.Stripe){r(window.Stripe);return}try{var o=Tt();if(o&&e)console.warn(se);else if(!o)o=ie(e);else if(o&&$!==null&&U!==null){var a;o.removeEventListener("load",$),o.removeEventListener("error",U),(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=ie(e)}$=It(r,n),U=At(n),o.addEventListener("load",$),o.addEventListener("error",U)}catch(c){n(c);return}}),T.catch(function(r){return T=null,Promise.reject(r)}))},Mt=function(e,r,n){if(e===null)return null;var o=r[0],a=o.match(/^pk_test/),c=Nt(e.version),l=he;a&&c!==l&&console.warn("Stripe.js@".concat(c," was loaded on the page, but @stripe/stripe-js@").concat("8.2.0"," expected Stripe.js@").concat(l,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var i=e.apply(void 0,r);return _t(i,n),i},_,xe=!1,Ee=function(){return _||(_=Lt(null).catch(function(e){return _=null,Promise.reject(e)}),_)};Promise.resolve().then(function(){return Ee()}).catch(function(t){xe||console.warn(t)});var Wt=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];xe=!0;var o=Date.now();return Ee().then(function(a){return Mt(a,r,o)})},Se={exports:{}},Ft="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ut=Ft,$t=Ut;function Ce(){}function be(){}be.resetWarningCache=Ce;var Gt=function(){function t(n,o,a,c,l,i){if(i!==$t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:be,resetWarningCache:Ce};return r.PropTypes=r,r};Se.exports=Gt();var qt=Se.exports;const p=mt(qt);function ce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function le(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ce(Object(r),!0).forEach(function(n){je(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function G(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?G=function(e){return typeof e}:G=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(t)}function je(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bt(t,e){if(t==null)return{};var r={},n=Object.keys(t),o,a;for(a=0;a<n.length;a++)o=n[a],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}function Vt(t,e){if(t==null)return{};var r=Bt(t,e),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)n=a[o],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Pe(t,e){return Yt(t)||zt(t,e)||Kt(t,e)||Jt()}function Yt(t){if(Array.isArray(t))return t}function zt(t,e){var r=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(r!=null){var n=[],o=!0,a=!1,c,l;try{for(r=r.call(t);!(o=(c=r.next()).done)&&(n.push(c.value),!(e&&n.length===e));o=!0);}catch(i){a=!0,l=i}finally{try{!o&&r.return!=null&&r.return()}finally{if(a)throw l}}return n}}function Kt(t,e){if(t){if(typeof t=="string")return ue(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ue(t,e)}}function ue(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Jt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var x=function(e,r,n){var o=!!n,a=f.useRef(n);f.useEffect(function(){a.current=n},[n]),f.useEffect(function(){if(!o||!e)return function(){};var c=function(){a.current&&a.current.apply(a,arguments)};return e.on(r,c),function(){e.off(r,c)}},[o,r,e,a])},K=function(e){var r=f.useRef(e);return f.useEffect(function(){r.current=e},[e]),r.current},k=function(e){return e!==null&&G(e)==="object"},Xt=function(e){return k(e)&&typeof e.then=="function"},Ht=function(e){return k(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},de="[object Object]",Zt=function t(e,r){if(!k(e)||!k(r))return e===r;var n=Array.isArray(e),o=Array.isArray(r);if(n!==o)return!1;var a=Object.prototype.toString.call(e)===de,c=Object.prototype.toString.call(r)===de;if(a!==c)return!1;if(!a&&!n)return e===r;var l=Object.keys(e),i=Object.keys(r);if(l.length!==i.length)return!1;for(var m={},v=0;v<l.length;v+=1)m[l[v]]=!0;for(var y=0;y<i.length;y+=1)m[i[y]]=!0;var d=Object.keys(m);if(d.length!==l.length)return!1;var b=e,P=r,R=function(M){return t(b[M],P[M])};return d.every(R)},Re=function(e,r,n){return k(e)?Object.keys(e).reduce(function(o,a){var c=!k(r)||!Zt(e[a],r[a]);return n.includes(a)?(c&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),o):c?le(le({},o||{}),{},je({},a,e[a])):o},null):null},Ne="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",pe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ne;if(e===null||Ht(e))return e;throw new Error(r)},Qt=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ne;if(Xt(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(o){return pe(o,r)})};var n=pe(e,r);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},er=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"5.3.0"}),e.registerAppInfo({name:"react-stripe-js",version:"5.3.0",url:"https://stripe.com/docs/stripe-js/react"}))},B=f.createContext(null);B.displayName="ElementsContext";var Oe=function(e,r){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(r," in an <Elements> provider."));return e},we=function(e){var r=e.stripe,n=e.options,o=e.children,a=f.useMemo(function(){return Qt(r)},[r]),c=f.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(n):null}}),l=Pe(c,2),i=l[0],m=l[1];f.useEffect(function(){var d=!0,b=function(R){m(function(C){return C.stripe?C:{stripe:R,elements:R.elements(n)}})};return a.tag==="async"&&!i.stripe?a.stripePromise.then(function(P){P&&d&&b(P)}):a.tag==="sync"&&!i.stripe&&b(a.stripe),function(){d=!1}},[a,i,n]);var v=K(r);f.useEffect(function(){v!==null&&v!==r&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[v,r]);var y=K(n);return f.useEffect(function(){if(i.elements){var d=Re(n,y,["clientSecret","fonts"]);d&&i.elements.update(d)}},[n,y,i.elements]),f.useEffect(function(){er(i.stripe)},[i.stripe]),f.createElement(B.Provider,{value:i},o)};we.propTypes={stripe:p.any,options:p.object};var tr=function(e){var r=f.useContext(B);return Oe(r,e)},rr=function(){var e=tr("calls useElements()"),r=e.elements;return r};p.func.isRequired;var De=f.createContext(null);De.displayName="CheckoutContext";p.any,p.shape({clientSecret:p.oneOfType([p.string,p.instanceOf(Promise)]).isRequired,elementsOptions:p.object}).isRequired;var J=function(e){var r=f.useContext(De),n=f.useContext(B);if(r){if(n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return r}else return Oe(n,e)},nr=["mode"],or=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},E=function(e,r){var n="".concat(or(e),"Element"),o=function(i){var m=i.id,v=i.className,y=i.options,d=y===void 0?{}:y,b=i.onBlur,P=i.onFocus,R=i.onReady,C=i.onChange,M=i.onEscape,tt=i.onClick,rt=i.onLoadError,nt=i.onLoaderStart,ot=i.onNetworksChange,at=i.onConfirm,st=i.onCancel,it=i.onShippingAddressChange,ct=i.onShippingRateChange,lt=i.onSavedPaymentMethodRemove,ut=i.onSavedPaymentMethodUpdate,W=J("mounts <".concat(n,">")),F="elements"in W?W.elements:null,w="checkoutState"in W?W.checkoutState:null,N=(w==null?void 0:w.type)==="success"||(w==null?void 0:w.type)==="loading"?w.sdk:null,dt=f.useState(null),re=Pe(dt,2),g=re[0],pt=re[1],O=f.useRef(null),V=f.useRef(null);x(g,"blur",b),x(g,"focus",P),x(g,"escape",M),x(g,"click",tt),x(g,"loaderror",rt),x(g,"loaderstart",nt),x(g,"networkschange",ot),x(g,"confirm",at),x(g,"cancel",st),x(g,"shippingaddresschange",it),x(g,"shippingratechange",ct),x(g,"savedpaymentmethodremove",lt),x(g,"savedpaymentmethodupdate",ut),x(g,"change",C);var Y;R&&(e==="expressCheckout"?Y=R:Y=function(){R(g)}),x(g,"ready",Y),f.useLayoutEffect(function(){if(O.current===null&&V.current!==null&&(F||N)){var h=null;if(N)switch(e){case"payment":h=N.createPaymentElement(d);break;case"address":if("mode"in d){var oe=d.mode,ae=Vt(d,nr);if(oe==="shipping")h=N.createShippingAddressElement(ae);else if(oe==="billing")h=N.createBillingAddressElement(ae);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":h=N.createExpressCheckoutElement(d);break;case"currencySelector":h=N.createCurrencySelectorElement();break;case"taxId":h=N.createTaxIdElement(d);break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else F&&(h=F.create(e,d));O.current=h,pt(h),h&&h.mount(V.current)}},[F,N,d]);var ne=K(d);return f.useEffect(function(){if(O.current){var h=Re(d,ne,["paymentRequest"]);h&&"update"in O.current&&O.current.update(h)}},[d,ne]),f.useLayoutEffect(function(){return function(){if(O.current&&typeof O.current.destroy=="function")try{O.current.destroy(),O.current=null}catch{}}},[]),f.createElement("div",{id:m,className:v,ref:V})},a=function(i){J("mounts <".concat(n,">"));var m=i.id,v=i.className;return f.createElement("div",{id:m,className:v})},c=r?a:o;return c.propTypes={id:p.string,className:p.string,onChange:p.func,onBlur:p.func,onFocus:p.func,onReady:p.func,onEscape:p.func,onClick:p.func,onLoadError:p.func,onLoaderStart:p.func,onNetworksChange:p.func,onConfirm:p.func,onCancel:p.func,onShippingAddressChange:p.func,onShippingRateChange:p.func,onSavedPaymentMethodRemove:p.func,onSavedPaymentMethodUpdate:p.func,options:p.object},c.displayName=n,c.__elementType=e,c},S=typeof window>"u",ar=f.createContext(null);ar.displayName="EmbeddedCheckoutProviderContext";var sr=function(){var e=J("calls useStripe()"),r=e.stripe;return r};E("auBankAccount",S);E("card",S);E("cardNumber",S);E("cardExpiry",S);E("cardCvc",S);E("iban",S);var ir=E("payment",S);E("expressCheckout",S);E("paymentRequestButton",S);E("linkAuthentication",S);E("address",S);E("shippingAddress",S);E("paymentMethodMessaging",S);E("taxId",S);var Z="Dialog",[ke,Rr]=vt(Z),[cr,j]=ke(Z),Te=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:o,onOpenChange:a,modal:c=!0}=t,l=u.useRef(null),i=u.useRef(null),[m=!1,v]=Ct({prop:n,defaultProp:o,onChange:a});return s.jsx(cr,{scope:e,triggerRef:l,contentRef:i,contentId:z(),titleId:z(),descriptionId:z(),open:m,onOpenChange:v,onOpenToggle:u.useCallback(()=>v(y=>!y),[v]),modal:c,children:r})};Te.displayName=Z;var _e="DialogTrigger",lr=u.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,o=j(_e,r),a=X(e,o.triggerRef);return s.jsx(I.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":te(o.open),...n,ref:a,onClick:A(t.onClick,o.onOpenToggle)})});lr.displayName=_e;var Q="DialogPortal",[ur,Ae]=ke(Q,{forceMount:void 0}),Ie=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:o}=t,a=j(Q,e);return s.jsx(ur,{scope:e,forceMount:r,children:u.Children.map(n,c=>s.jsx(H,{present:r||a.open,children:s.jsx(bt,{asChild:!0,container:o,children:c})}))})};Ie.displayName=Q;var q="DialogOverlay",Le=u.forwardRef((t,e)=>{const r=Ae(q,t.__scopeDialog),{forceMount:n=r.forceMount,...o}=t,a=j(q,t.__scopeDialog);return a.modal?s.jsx(H,{present:n||a.open,children:s.jsx(pr,{...o,ref:e})}):null});Le.displayName=q;var dr=jt("DialogOverlay.RemoveScroll"),pr=u.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,o=j(q,r);return s.jsx(gt,{as:dr,allowPinchZoom:!0,shards:[o.contentRef],children:s.jsx(I.div,{"data-state":te(o.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),D="DialogContent",Me=u.forwardRef((t,e)=>{const r=Ae(D,t.__scopeDialog),{forceMount:n=r.forceMount,...o}=t,a=j(D,t.__scopeDialog);return s.jsx(H,{present:n||a.open,children:a.modal?s.jsx(fr,{...o,ref:e}):s.jsx(mr,{...o,ref:e})})});Me.displayName=D;var fr=u.forwardRef((t,e)=>{const r=j(D,t.__scopeDialog),n=u.useRef(null),o=X(e,r.contentRef,n);return u.useEffect(()=>{const a=n.current;if(a)return ht(a)},[]),s.jsx(We,{...t,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:A(t.onCloseAutoFocus,a=>{var c;a.preventDefault(),(c=r.triggerRef.current)==null||c.focus()}),onPointerDownOutside:A(t.onPointerDownOutside,a=>{const c=a.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0;(c.button===2||l)&&a.preventDefault()}),onFocusOutside:A(t.onFocusOutside,a=>a.preventDefault())})}),mr=u.forwardRef((t,e)=>{const r=j(D,t.__scopeDialog),n=u.useRef(!1),o=u.useRef(!1);return s.jsx(We,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var c,l;(c=t.onCloseAutoFocus)==null||c.call(t,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,o.current=!1},onInteractOutside:a=>{var i,m;(i=t.onInteractOutside)==null||i.call(t,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const c=a.target;((m=r.triggerRef.current)==null?void 0:m.contains(c))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),We=u.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:a,...c}=t,l=j(D,r),i=u.useRef(null),m=X(e,i);return yt(),s.jsxs(s.Fragment,{children:[s.jsx(xt,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:a,children:s.jsx(Et,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":te(l.open),...c,ref:m,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(vr,{titleId:l.titleId}),s.jsx(hr,{contentRef:i,descriptionId:l.descriptionId})]})]})}),ee="DialogTitle",Fe=u.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,o=j(ee,r);return s.jsx(I.h2,{id:o.titleId,...n,ref:e})});Fe.displayName=ee;var Ue="DialogDescription",$e=u.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,o=j(Ue,r);return s.jsx(I.p,{id:o.descriptionId,...n,ref:e})});$e.displayName=Ue;var Ge="DialogClose",qe=u.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,o=j(Ge,r);return s.jsx(I.button,{type:"button",...n,ref:e,onClick:A(t.onClick,()=>o.onOpenChange(!1))})});qe.displayName=Ge;function te(t){return t?"open":"closed"}var Be="DialogTitleWarning",[Nr,Ve]=St(Be,{contentName:D,titleName:ee,docsSlug:"dialog"}),vr=({titleId:t})=>{const e=Ve(Be),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return u.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},gr="DialogDescriptionWarning",hr=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ve(gr).contentName}}.`;return u.useEffect(()=>{var a;const o=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&o&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},yr=Te,xr=Ie,Ye=Le,ze=Me,Ke=Fe,Je=$e,Er=qe;const Sr=yr,Cr=xr,Xe=u.forwardRef(({className:t,...e},r)=>s.jsx(Ye,{ref:r,className:L("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));Xe.displayName=Ye.displayName;const He=u.forwardRef(({className:t,children:e,hideCloseButton:r,...n},o)=>s.jsxs(Cr,{children:[s.jsx(Xe,{}),s.jsxs(ze,{ref:o,className:L("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]",t),...n,children:[e,!r&&s.jsxs(Er,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(Pt,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));He.displayName=ze.displayName;const Ze=({className:t,...e})=>s.jsx("div",{className:L("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Ze.displayName="DialogHeader";const Qe=u.forwardRef(({className:t,...e},r)=>s.jsx(Ke,{ref:r,className:L("text-lg font-semibold leading-none tracking-tight",t),...e}));Qe.displayName=Ke.displayName;const et=u.forwardRef(({className:t,...e},r)=>s.jsx(Je,{ref:r,className:L("text-sm text-muted-foreground",t),...e}));et.displayName=Je.displayName;const br=Wt("pk_test_51SMuPnROdiVbLQscW7AaZNO9LSm7yB6hmlIprLX9Ei9NpEp76NZZYFL9UcDBYsP2KXFqZLQlOGGgyRfXAtOzK0lV00P2CdgrGu");function jr({onSuccess:t,tierName:e,bottles:r,extras:n}){const{t:o}=fe(),a=sr(),c=rr(),{toast:l}=me(),[i,m]=u.useState(!1),v=async y=>{if(y.preventDefault(),!(!a||!c)){m(!0);try{const{error:d,paymentIntent:b}=await a.confirmPayment({elements:c,redirect:"if_required"});d?l({title:o("checkout.error"),description:d.message,variant:"destructive"}):b&&b.status==="succeeded"&&(l({title:o("checkout.success"),description:o("checkout.successMessage")}),t())}catch{l({title:o("checkout.error"),description:o("checkout.errorMessage"),variant:"destructive"})}finally{m(!1)}}};return s.jsxs("form",{onSubmit:v,className:"space-y-6",children:[s.jsxs("div",{className:"bg-muted/30 p-4 space-y-2",children:[s.jsx("p",{className:"text-sm font-medium",children:e}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[r," ",o("services.subscription.bottlesCount")]}),n.length>0&&s.jsxs("div",{className:"pt-2 border-t border-border/50",children:[s.jsxs("p",{className:"text-xs text-muted-foreground mb-1",children:[o("checkout.extras"),":"]}),s.jsxs("ul",{className:"space-y-1",children:[n.includes("champagne")&&s.jsxs("li",{className:"text-sm text-muted-foreground",children:["+ 1 ",o("checkout.extraChampagne")]}),n.includes("dessert")&&s.jsxs("li",{className:"text-sm text-muted-foreground",children:["+ 1 ",o("checkout.extraDessert")]})]})]})]}),s.jsx(ir,{}),s.jsx(ve,{type:"submit",className:"w-full",disabled:!a||!c||i,"data-testid":"button-complete-payment",children:i?s.jsxs(s.Fragment,{children:[s.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}),o("checkout.processing")]}):o("checkout.completePayment")})]})}function Or({isOpen:t,onClose:e,tier:r,tierName:n,bottles:o,amount:a,extras:c=[]}){const{t:l}=fe(),{toast:i}=me(),[m,v]=u.useState(""),[y,d]=u.useState(!0),[b,P]=u.useState(!1);u.useEffect(()=>{if(!t){v(""),d(!0),P(!1);return}Rt("POST","/api/create-payment-intent",{tier:r,bottles:o,extras:c}).then(C=>{if(!C.ok)throw new Error("Failed to create payment intent");return C.json()}).then(C=>{v(C.clientSecret),d(!1)}).catch(C=>{console.error("Error creating payment intent:",C),P(!0),d(!1),i({title:l("checkout.error"),description:l("checkout.errorMessage"),variant:"destructive"})})},[t,r,o,c,l,i]);const R=()=>{e()};return s.jsx(Sr,{open:t,onOpenChange:e,children:s.jsxs(He,{className:"max-w-xl max-h-[90vh] flex flex-col","data-testid":"dialog-checkout",children:[s.jsxs(Ze,{className:"flex-shrink-0",children:[s.jsx(Qe,{children:l("checkout.title")}),s.jsx(et,{children:l("checkout.description")})]}),s.jsx("div",{className:"overflow-y-auto flex-1 -mx-6 px-6",children:b?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx("p",{className:"text-destructive mb-4",children:l("checkout.errorMessage")}),s.jsx(ve,{onClick:e,variant:"outline",children:l("nav.contact")})]}):y||!m?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(ge,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsx(we,{stripe:br,options:{clientSecret:m,appearance:{theme:"stripe"}},children:s.jsx(jr,{onSuccess:R,tierName:n,bottles:o,extras:c})})})]})})}export{Or as default};
